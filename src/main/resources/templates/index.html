<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="/highlight/styles/default.css" />
    <link rel="stylesheet" href="/css/markdown.css"/>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" />
    <script src="/highlight/highlight.pack.js"></script>
    <script src="/jquery/jquery-3.3.1.min.js"></script>
    <script src="/jquery/jquery.goup.min.js"></script>

    <title th:text="${index.title}"></title>

    <script th:inline="javascript" type="text/javascript">


        var loadTree = function(html,list){
            for(var index = 0;index<list.length;index++){
                var item = list[index];
                console.log(item);
                if(item.list!=null){
                    html+='<li>'+item.path+'</li>';
                    html+='<ul>';
                    html = loadTree(html,item.list);
                    html+='</ul>';
                }else{
                    html+='<li>'+item.title+'</li>';
                }
            }
            return html;
        }

        var loadListView = function(){
            var list = [[${catalogs}]];
            console.log(list);
            $("#catalogs").empty();
            var html = loadTree('',list.list);
            console.log(html);
            $("#catalogs").append(html);
        };

        var loadIndexView = function(){
            var html = [[${index.content}]];
            console.log(html);
            $("#div").html(html);
            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });
        };


        $(document).ready(function () {
            loadListView();

            loadIndexView();

            $.goup({
                trigger: 100,
                bottomOffset: 150,
                locationOffset: 100,
                titleAsText: true
            });


        });
    </script>
</head>
<body>

<ul id="catalogs">

</ul>

<div class="container" id="div"></div>
</body>


</html>
